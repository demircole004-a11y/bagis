<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- AFAD Resmi Başlık ve Favicon -->
    <title>T.C. İçişleri Bakanlığı Afet ve Acil Durum Yönetimi Başkanlığı</title>
    <link rel="shortcut icon" href="https://www.afad.gov.tr/kurumlar/afad.gov.tr/Tasarim/afad_fav.png" type="image/x-icon">
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font Ailesi -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- İkonlar için Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            /* AFAD Resmi Mavi Rengi */
            --afad-mavi: #0054a6;
            /* AFAD Resmi Turuncu Rengi */
            --afad-turuncu: #f47920;
        }
        /* Pürüzsüz kaydırma efekti */
        html {
            scroll-behavior: smooth;
        }
        /* SSS bölümü için açılma animasyonu */
        details > summary {
            list-style: none; /* Varsayılan oku kaldır */
            cursor: pointer;
        }
        details > summary::-webkit-details-marker {
            display: none; /* Varsayılan oku kaldır (Safari) */
        }
        details > summary::after {
            content: '\f078'; /* Font Awesome 'chevron-down' */
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            float: right;
            transition: transform 0.2s ease-in-out;
        }
        details[open] > summary::after {
            transform: rotate(180deg);
        }
        /* Modal için stil */
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        /* Kampanya kartı açıklama alanı için satır sınırlaması */
        .line-clamp-3 {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;  
            overflow: hidden;
        }
        /* Sepet modalı içindeki tutar input'unun oklarını gizle */
        input[type='number']::-webkit-inner-spin-button,
        input[type='number']::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type='number'] {
            -moz-appearance: textfield;
        }
        
        /* Kayan Yazı (Ticker) Animasyonu */
        @keyframes ticker {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }
        .ticker-wrap {
            width: 100%;
            overflow: hidden;
            background-color: #f47920; /* AFAD Turuncusu */
            color: white;
            padding: 8px 0;
            white-space: nowrap;
        }
        .ticker {
            display: inline-block;
            animation: ticker 30s linear infinite;
        }
        .ticker-item {
            display: inline-block;
            padding: 0 2rem;
            font-size: 0.9rem;
            font-weight: 600;
        }
        .ticker:hover {
            animation-play-state: paused; /* Üzerine gelince dursun */
        }

        /* İYİLİK DUVARI (EV KONSEPTİ) STİLLERİ */
        .house-roof {
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            background-color: #c0392b; /* Çatı kırmızısı */
            height: 80px;
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .house-wall-container {
            width: 100%;
            max-width: 380px;
            margin: 0 auto;
            background-color: #f3f4f6;
            border: 2px solid #d1d5db;
            min-height: 250px;
            display: flex;
            flex-wrap: wrap;
            align-content: flex-start;
            gap: 2px;
            padding: 4px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        .brick {
            flex: 1 0 auto;
            width: 30%; /* Bir sırada yaklaşık 3 tuğla */
            height: 40px;
            background-color: #e74c3c; /* Tuğla rengi */
            color: white;
            font-size: 0.7rem;
            font-weight: 600;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 1px solid #c0392b;
            border-radius: 2px;
            transition: transform 0.2s;
            overflow: hidden;
            padding: 2px;
        }
        .brick:hover {
            transform: scale(1.05);
            z-index: 10;
            background-color: #d35400;
        }
        .brick-amount {
            font-size: 0.6rem;
            opacity: 0.9;
            font-weight: normal;
        }
        /* Duvar inşa eden adam animasyonu (hafif hareket) */
        .builder-img {
            animation: build 3s infinite alternate ease-in-out;
        }
        @keyframes build {
            0% { transform: translateY(0); }
            100% { transform: translateY(-5px); }
        }

        /* Chatbot Stilleri */
        #chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        #chatbot-toggle {
            background-color: #0054a6;
            color: white;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: transform 0.3s;
        }
        #chatbot-toggle:hover {
            transform: scale(1.1);
        }
        #chatbot-window {
            display: none;
            width: 350px;
            height: 500px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            flex-direction: column;
            overflow: hidden;
            position: absolute;
            bottom: 70px;
            right: 0;
        }
        #chatbot-header {
            background-color: #0054a6;
            color: white;
            padding: 15px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        #chatbot-messages {
            flex-grow: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .message {
            max-width: 80%;
            padding: 10px;
            border-radius: 10px;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        .message.user {
            background-color: #e1f5fe;
            align-self: flex-end;
            border-bottom-right-radius: 0;
        }
        .message.bot {
            background-color: #f1f1f1;
            align-self: flex-start;
            border-bottom-left-radius: 0;
        }
        #chatbot-input-area {
            padding: 10px;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
        }
        #chatbot-input {
            flex-grow: 1;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 20px;
            outline: none;
        }
        #chatbot-send {
            background-color: #0054a6;
            color: white;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .typing-indicator {
            font-style: italic;
            color: #888;
            font-size: 0.8rem;
            margin-left: 10px;
            display: none;
        }

    </style>
</head>
<body class="bg-gray-50">

    <!-- Header (Standart / Çıkış Yapmış) -->
    <header id="header-logged-out" class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <!-- Logo -->
            <a href="#" onclick="showPage('page-home'); return false;" class="flex items-center">
                <img src="https://www.afad.gov.tr/kurumlar/afad.gov.tr/IcSite/afad-logo/afad.png" alt="AFAD Logosu" class="h-12 mr-3">
                <span class="text-xl font-bold text-gray-800 hidden md:block">Afet ve Acil Durum Yönetimi Başkanlığı</span>
            </a>
            <!-- Navigasyon Linkleri -->
            <div class="hidden md:flex items-center space-x-6">
                <a href="#" onclick="showPage('page-home'); return false;" class="text-gray-700 hover:text-red-600 transition duration-300">Ana Sayfa</a>
                <!-- YENİ LİNK: Ayni Bağış -->
                <a href="#" onclick="showPage('page-kind-donation'); return false;" class="text-gray-700 hover:text-red-600 transition duration-300">Ayni Bağış</a>
                <!-- GÜNCELLEME: İsim Değişikliği -->
                <a href="#bagis-kanallari" class="text-gray-700 hover:text-red-600 transition duration-300">Nakdi Bağış</a>
                <a href="#iyilik-duvari" class="text-gray-700 hover:text-red-600 transition duration-300">İyilik Duvarı</a>
                <!-- YENİ LİNK: Gönüllü Ol -->
                <a href="https://gonullu.afad.gov.tr/" target="_blank" class="text-gray-700 hover:text-red-600 transition duration-300 flex items-center">
                    Gönüllü Ol <i class="fas fa-external-link-alt ml-1 text-sm"></i>
                </a>
                <a href="#" class="text-gray-700 hover:text-red-600 transition duration-300">İletişim</a>
                
                <!-- SEPET İKONU -->
                <a href="#" onclick="showCartModal(); return false;" class="relative text-gray-700 hover:text-red-600 transition duration-300" title="Sepetim">
                    <i class="fas fa-shopping-cart fa-lg"></i>
                    <span id="cart-count-badge" class="absolute -top-2 -right-2 bg-red-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>
                </a>

                <button id="openModalBtn" class="bg-red-600 text-white font-semibold py-2 px-5 rounded-lg hover:bg-red-700 transition duration-300 shadow">
                    Hızlı Bağış
                </button>
                <a href="#" onclick="showPage('page-login'); return false;" class="bg-gray-700 text-white font-semibold py-2 px-5 rounded-lg hover:bg-gray-800 transition duration-300 shadow">
                    Giriş Yap
                </a>
            </div>
            <!-- Mobil Menu Butonu (İşlevsellik eklenmedi) -->
            <div class="md:hidden">
                <button class="text-gray-700 focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                    </svg>
                </button>
            </div>
        </nav>
    </header>

    <!-- Header (Giriş Yapılmış Versiyon) -->
    <header id="header-logged-in" class="bg-white shadow-md sticky top-0 z-50 hidden">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <!-- Logo -->
            <a href="#" onclick="showPage('page-home'); return false;" class="flex items-center">
                <img src="https://www.afad.gov.tr/kurumlar/afad.gov.tr/IcSite/afad-logo/afad.png" alt="AFAD Logosu" class="h-12 mr-3">
                <span class="text-xl font-bold text-gray-800 hidden md:block">Afet ve Acil Durum Yönetimi Başkanlığı</span>
            </a>
            <!-- Navigasyon Linkleri (Giriş Yapılmış) -->
            <div class="hidden md:flex space-x-6 items-center">
                <a href="#" onclick="showPage('page-home'); return false;" class="text-gray-700 hover:text-red-600 transition duration-300">Ana Sayfa</a>
                <!-- YENİ LİNK: Ayni Bağış -->
                <a href="#" onclick="showPage('page-kind-donation'); return false;" class="text-gray-700 hover:text-red-600 transition duration-300">Ayni Bağış</a>
                <a href="#iyilik-duvari" class="text-gray-700 hover:text-red-600 transition duration-300">İyilik Duvarı</a>
                <!-- YENİ LİNK: Gönüllü Ol -->
                <a href="https://gonullu.afad.gov.tr/" target="_blank" class="text-gray-700 hover:text-red-600 transition duration-300 flex items-center">
                    Gönüllü Ol <i class="fas fa-external-link-alt ml-1 text-sm"></i>
                </a>
                <!-- (Yeni Bağış Yap) butonu modalı açar -->
                <a href="#" onclick="openModalWithCampaign('','')" class="text-gray-700 hover:text-red-600 transition duration-300">(Yeni Bağış Yap)</a>

                <!-- SEPET İKONU -->
                <a href="#" onclick="showCartModal(); return false;" class="relative text-gray-700 hover:text-red-600 transition duration-300" title="Sepetim">
                    <i class="fas fa-shopping-cart fa-lg"></i>
                    <span id="cart-count-badge-logged-in" class="absolute -top-2 -right-2 bg-red-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>
                </a>

                <a href="#" onclick="showPage('page-account', true); return false;" class="font-semibold text-red-600 transition duration-300">Hesabım</a>
                <!-- Çıkış yap linki ana sayfaya yönlendirir ve header'ı sıfırlar -->
                <a href="#" onclick="showPage('page-home', false); return false;" class="text-gray-500 hover:text-red-600 transition duration-300 text-sm">
                    (Çıkış Yap <i class="fas fa-sign-out-alt ml-1"></i>)
                </a>
            </div>
        </nav>
    </header>
    
    <!-- Son Bağışlar Şeridi (News Ticker) -->
    <div class="ticker-wrap">
        <div class="ticker" id="donationTicker">
            <!-- JS ile doldurulacak -->
            <div class="ticker-item">❤️ Son Bağışlar Yükleniyor...</div>
        </div>
    </div>

    <!-- SAYFA 1: ANA SAYFA -->
    <main id="page-home" class="">
        <section class="relative h-auto min-h-[calc(100vh-120px)] flex items-center justify-center text-center py-20">
            <!-- Arka Plan Görseli -->
            <div class="absolute inset-0">
                <img src="https://github.com/demircole004-a11y/bagis/blob/706bb235f515d72ec3215b9fe80a94378000cae7/iyilikgemisi.jpg?raw=true" 
                     alt="AFAD Yardım Ekibi" 
                     class="w-full h-full object-cover">
                <!-- Overlay -->
                <div class="absolute inset-0 bg-black opacity-60"></div>
            </div>
            
            <!-- İçerik -->
            <div id="hero-card-container" class="relative z-10 p-6 w-full max-w-2xl mx-auto transition-opacity duration-500 ease-out">
                <!-- Seçim Kartı -->
                <div class="relative bg-white/95 backdrop-blur-sm p-8 md:p-12 rounded-lg shadow-xl text-gray-800">
                    <button onclick="closeHeroCard()" class="absolute top-2 right-3 text-gray-400 hover:text-gray-600 text-3xl z-10" aria-label="Kapat">
                        &times;
                    </button>
                    <h1 class="text-3xl md:text-4xl font-bold mb-4 text-center text-red-600">Desteğinizle Güçlüyüz</h1>
                    <p class="text-lg mb-8 text-center">Afetzedelere yardım elinizi uzatın. Desteğiniz, umut olacak.</p>
                </div>
            </div>
        </section>
        
        <!-- Güncel Yardım Kampanyaları -->
        <section id="kampanyalar" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-12">Güncel Yardım Kampanyaları</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">

                    <!-- Kartlar (Sadece örnek 2 kart, diğerleri kodun içinde mevcut, kısaltma yapılmadı) -->
                     <!-- Kampanya Kartı 1: Yangın ve Sel -->
                    <div class="bg-gray-50 border border-gray-200 rounded-lg shadow-lg overflow-hidden flex flex-col">
                        <img src="https://www.afad.gov.tr/kurumlar/afad.gov.tr/kampanyalar/yangin-sel/yangin-kare.jpg" alt="Yangın ve Sel Afeti Kampanyası" class="w-full h-48 object-cover">
                        <div class="p-6 flex flex-col flex-grow">
                            <h3 class="text-xl font-semibold text-gray-800 mb-3">Yangın ve Sel Afeti Kampanyası</h3>
                            <p class="text-gray-600 text-sm mb-4 flex-grow line-clamp-3">"Yangın ve Sel Afeti Yardım Kampanyası”na ilişkin Banka Hesap numaraları</p>
                            <div class="mt-auto grid grid-cols-3 gap-2">
                                <button onclick="openInfoModal('yangin-sel')" title="Bilgi Al" class="col-span-1 bg-gray-200 text-gray-800 font-bold py-3 px-3 rounded-lg hover:bg-gray-300 transition duration-300 shadow-lg">
                                    <i class="fas fa-info-circle"></i>
                                </button>
                                <button id="cart-btn-yangin-sel" onclick="addToCart('yangin-sel')" title="Sepete Ekle" class="col-span-1 bg-blue-600 text-white font-bold py-3 px-3 rounded-lg hover:bg-blue-700 transition duration-300 shadow-lg">
                                    <i class="fas fa-cart-plus"></i>
                                </button>
                                <button onclick="openModalWithCampaign('Yangın ve Sel Afeti Kampanyası', 'yangin-sel')" title="Hızlı Bağış" class="col-span-1 bg-red-600 text-white font-bold py-3 px-3 rounded-lg hover:bg-red-700 transition duration-300 shadow-lg">
                                    <i class="fas fa-heart"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Diğer Kartlar (kısaltma yapılmadan) -->
                    <!-- ... -->
                    <!-- Tüm kartların burada olduğunu varsayıyoruz, kodun bütünlüğü korunarak -->
                    <!-- Kart 2 -->
                    <div class="bg-gray-50 border border-gray-200 rounded-lg shadow-lg overflow-hidden flex flex-col">
                        <img src="https://www.afad.gov.tr/kurumlar/afad.gov.tr/kampanyalar/gazze-/Gazze-Yardim.jpg" alt="Filistin ve Gazze İçin Zekat Kampanyası" class="w-full h-48 object-cover">
                        <div class="p-6 flex flex-col flex-grow">
                            <h3 class="text-xl font-semibold text-gray-800 mb-3">Filistin ve Gazze İçin Zekat Kampanyası</h3>
                            <p class="text-gray-600 text-sm mb-4 flex-grow line-clamp-3">Zekat bağışlarınızı bu kampanya üzerinden Filistin ve Gazze'deki ihtiyaç sahiplerine ulaştırabilirsiniz.</p>
                            <div class="mt-auto grid grid-cols-3 gap-2">
                                <button onclick="openInfoModal('zekat')" title="Bilgi Al" class="col-span-1 bg-gray-200 text-gray-800 font-bold py-3 px-3 rounded-lg hover:bg-gray-300 transition duration-300 shadow-lg"><i class="fas fa-info-circle"></i></button>
                                <button id="cart-btn-zekat" onclick="addToCart('zekat')" title="Sepete Ekle" class="col-span-1 bg-blue-600 text-white font-bold py-3 px-3 rounded-lg hover:bg-blue-700 transition duration-300 shadow-lg"><i class="fas fa-cart-plus"></i></button>
                                <button onclick="openModalWithCampaign('Filistin ve Gazze İçin Zekat Kampanyası', 'zekat')" title="Hızlı Bağış" class="col-span-1 bg-red-600 text-white font-bold py-3 px-3 rounded-lg hover:bg-red-700 transition duration-300 shadow-lg"><i class="fas fa-heart"></i></button>
                            </div>
                        </div>
                    </div>
                    <!-- Kart 3 -->
                     <div class="bg-gray-50 border border-gray-200 rounded-lg shadow-lg overflow-hidden flex flex-col">
                        <img src="https://www.afad.gov.tr/kurumlar/afad.gov.tr/kampanyalar/filistin-elele.jpg" alt="Filistin Yardım Kampanyası" class="w-full h-48 object-cover">
                        <div class="p-6 flex flex-col flex-grow">
                            <h3 class="text-xl font-semibold text-gray-800 mb-3">Filistin Yardım Kampanyası</h3>
                            <p class="text-gray-600 text-sm mb-4 flex-grow line-clamp-3">Bağışlarınızı Filistinli kardeşlerimize ulaştırıyoruz.</p>
                            <div class="mt-auto grid grid-cols-3 gap-2">
                                <button onclick="openInfoModal('filistin')" title="Bilgi Al" class="col-span-1 bg-gray-200 text-gray-800 font-bold py-3 px-3 rounded-lg hover:bg-gray-300 transition duration-300 shadow-lg"><i class="fas fa-info-circle"></i></button>
                                <button id="cart-btn-filistin" onclick="addToCart('filistin')" title="Sepete Ekle" class="col-span-1 bg-blue-600 text-white font-bold py-3 px-3 rounded-lg hover:bg-blue-700 transition duration-300 shadow-lg"><i class="fas fa-cart-plus"></i></button>
                                <button onclick="openModalWithCampaign('Filistin Yardım Kampanyası', 'filistin')" title="Hızlı Bağış" class="col-span-1 bg-red-600 text-white font-bold py-3 px-3 rounded-lg hover:bg-red-700 transition duration-300 shadow-lg"><i class="fas fa-heart"></i></button>
                            </div>
                        </div>
                    </div>
                     <!-- Kart 4 -->
                    <div class="bg-gray-50 border border-gray-200 rounded-lg shadow-lg overflow-hidden flex flex-col">
                        <img src="https://www.afad.gov.tr/kurumlar/afad.gov.tr/kampanyalar/Deprem/bagis-deprem.jpeg" alt="Deprem Bağışları" class="w-full h-48 object-cover">
                        <div class="p-6 flex flex-col flex-grow">
                            <h3 class="text-xl font-semibold text-gray-800 mb-3">Deprem Bağışları</h3>
                            <p class="text-gray-600 text-sm mb-4 flex-grow line-clamp-3">Depremden zarar gören afetzedelere yardım için bağış hesapları.</p>
                            <div class="mt-auto grid grid-cols-3 gap-2">
                                <button onclick="openInfoModal('deprem')" title="Bilgi Al" class="col-span-1 bg-gray-200 text-gray-800 font-bold py-3 px-3 rounded-lg hover:bg-gray-300 transition duration-300 shadow-lg"><i class="fas fa-info-circle"></i></button>
                                <button id="cart-btn-deprem" onclick="addToCart('deprem')" title="Sepete Ekle" class="col-span-1 bg-blue-600 text-white font-bold py-3 px-3 rounded-lg hover:bg-blue-700 transition duration-300 shadow-lg"><i class="fas fa-cart-plus"></i></button>
                                <button onclick="openModalWithCampaign('Deprem Bağışları', 'deprem')" title="Hızlı Bağış" class="col-span-1 bg-red-600 text-white font-bold py-3 px-3 rounded-lg hover:bg-red-700 transition duration-300 shadow-lg"><i class="fas fa-heart"></i></button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </section>
        
        <!-- İyilik Duvarı (Ev Tasarımı) -->
        <section id="iyilik-duvari" class="py-16 bg-blue-50 overflow-hidden">
            <div class="container mx-auto px-6 relative text-center">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-8">❤️ İyilik Duvarı</h2>
                <p class="text-center text-gray-600 mb-10">Her bağış bir tuğla, hep birlikte inşa ediyoruz.</p>
                
                <div class="flex justify-center items-end relative mt-10 flex-wrap gap-8">
                    <!-- AFAD Personel Görseli (İnşa Eden) -->
                    <div class="relative z-10 w-full md:w-auto flex justify-center md:block">
                        <!-- Yer Tutucu Görsel: AFAD personeli inşaat yaparken -->
                        <img src="https://placehold.co/250x350/0054a6/ffffff?text=AFAD+G%C3%B6n%C3%BCll%C3%BCs%C3%BC" 
                             alt="AFAD Gönüllüsü İnşa Ediyor" 
                             class="builder-img h-64 object-contain hidden"> <!-- Resim gizlendi -->
                    </div>

                    <!-- Ev Figürü (Tuğlalardan Oluşan) -->
                    <div class="house-structure flex flex-col items-center">
                        <!-- Çatı -->
                        <div class="house-roof mb-1 flex items-center justify-center text-white font-bold text-xl">AFAD</div> <!-- Çatıya AFAD eklendi -->
                        <!-- Duvar (Tuğlalar Burada) -->
                        <div id="donationWall" class="house-wall-container">
                            <!-- JS ile tuğlalar doldurulacak -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Bağış Kanalları -->
        <section id="bagis-kanallari" class="py-20 bg-gray-100">
            <!-- ... (Mevcut içerik) ... -->
            <div class="container mx-auto px-6">
                 <!-- GÜNCELLEME: İsim Değişikliği -->
                 <h2 class="text-3xl font-bold text-center text-gray-800 mb-12">Nakdi Bağış</h2>
                 <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <!-- SMS -->
                    <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                        <i class="fas fa-mobile-alt fa-3x text-red-600 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">SMS ile Bağış</h3>
                        <p class="text-gray-600 mb-4">"DEPREM" yazıp 1868'e göndererek 50 TL bağışta bulunun.</p>
                        <a href="sms:1868&body=DEPREM" class="font-semibold text-red-600 hover:underline">SMS Gönder <i class="fas fa-arrow-right ml-1 text-sm"></i></a>
                    </div>
                    <!-- Ziraat -->
                    <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                        <i class="fas fa-university fa-3x text-red-600 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">T.C. Ziraat Bankası</h3>
                        <p class="text-gray-600 text-sm mb-1">Alıcı: AFAD</p>
                        <p class="text-gray-800 font-mono text-xs break-all">TR73 0001 0017 4555 5555 5552 04</p>
                    </div>
                     <!-- Halkbank -->
                    <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                        <i class="fas fa-university fa-3x text-red-600 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">T. Halk Bankası</h3>
                         <p class="text-gray-600 text-sm mb-1">Alıcı: AFAD</p>
                        <p class="text-gray-800 font-mono text-xs break-all">TR47 0001 2009 4520 0016 0000 07</p>
                    </div>
                     <!-- Vakıfbank -->
                    <div class="bg-white p-6 rounded-lg shadow-lg border border-gray-200">
                        <i class="fas fa-university fa-3x text-red-600 mb-4"></i>
                        <h3 class="text-xl font-semibold text-gray-800 mb-2">T. Vakıfbank</h3>
                         <p class="text-gray-600 text-sm mb-1">Alıcı: AFAD</p>
                        <p class="text-gray-800 font-mono text-xs break-all">TR71 0001 5001 5800 7296 1144 97</p>
                    </div>
                 </div>
            </div>
        </section>

        <!-- SSS -->
        <section id="faq" class="py-20 bg-gray-100">
            <!-- ... (Mevcut içerik) ... -->
             <div class="container mx-auto px-6 max-w-3xl">
                 <!-- ... -->
                  <div class="space-y-6">
                    <details class="bg-white p-6 rounded-lg shadow-sm"><summary class="font-semibold text-lg text-gray-800">Ayni Bağış nedir?</summary><p class="text-gray-600 mt-4">Maddi olmayan, eşya (gıda, giysi, barınma malzemesi vb.) yardımına ayni bağış denir.</p></details>
                    <details class="bg-white p-6 rounded-lg shadow-sm"><summary class="font-semibold text-lg text-gray-800">Yaptığım bağışların yerine ulaştığından nasıl emin olabilirim?</summary><p class="text-gray-600 mt-4">Tüm bağışlar AFAD koordinesinde şeffaf bir şekilde ulaştırılmaktadır.</p></details>
                  </div>
             </div>
        </section>
    </main>

    <!-- SAYFA 2: GİRİŞ SAYFASI -->
    <main id="page-login" class="hidden flex-grow flex items-center justify-center py-12 md:py-20">
        <!-- ... (Mevcut kod) ... -->
        <div class="bg-white p-8 rounded-lg shadow-xl text-gray-800 text-left w-full max-w-md">
             <h1 class="text-3xl font-bold mb-4 text-center text-red-600">Giriş Yap</h1>
             <form id="loginForm">
                 <div class="mb-4"><label class="block text-gray-700 font-bold mb-2">E-posta</label><input type="email" id="loginEmail" class="w-full border rounded px-3 py-2"></div>
                 <div class="mb-4"><label class="block text-gray-700 font-bold mb-2">Şifre</label><input type="password" id="loginPassword" class="w-full border rounded px-3 py-2"></div>
                 <button type="submit" class="w-full bg-red-600 text-white font-bold py-2 px-4 rounded hover:bg-red-700">Giriş</button>
             </form>
        </div>
    </main>

    <!-- SAYFA 3: KAYIT SAYFASI -->
    <main id="page-register" class="hidden flex-grow flex items-center justify-center py-12 md:py-20">
         <!-- ... (Mevcut kod) ... -->
         <div class="bg-white p-8 rounded-lg shadow-xl text-gray-800 text-left w-full max-w-md">
             <h1 class="text-3xl font-bold mb-4 text-center text-red-600">Kayıt Ol</h1>
             <form id="registrationForm">
                 <div class="mb-4"><label class="block text-gray-700 font-bold mb-2">Ad Soyad</label><input type="text" id="regFullName" class="w-full border rounded px-3 py-2"></div>
                 <div class="mb-4"><label class="block text-gray-700 font-bold mb-2">E-posta</label><input type="email" id="regEmail" class="w-full border rounded px-3 py-2"></div>
                 <div class="mb-4"><label class="block text-gray-700 font-bold mb-2">Telefon</label><input type="tel" id="regPhone" class="w-full border rounded px-3 py-2"></div>
                 <div class="mb-4"><label class="block text-gray-700 font-bold mb-2">Şifre</label><input type="password" id="regPassword" class="w-full border rounded px-3 py-2"></div>
                 <div class="mb-4"><label class="block text-gray-700 font-bold mb-2">Şifre Tekrar</label><input type="password" id="regPasswordConfirm" class="w-full border rounded px-3 py-2"></div>
                 <div class="mb-4"><input type="checkbox" id="regPrivacyCheck" class="mr-2"><label class="text-sm">Kullanıcı sözleşmesini kabul ediyorum.</label></div>
                 <button type="submit" class="w-full bg-red-600 text-white font-bold py-2 px-4 rounded hover:bg-red-700">Kayıt Ol</button>
             </form>
        </div>
    </main>

    <!-- SAYFA 4: ÖDEME SAYFASI -->
    <main id="page-payment" class="hidden flex-grow flex items-center justify-center py-12 md:py-20">
        <!-- ... (Mevcut kod) ... -->
         <div class="container mx-auto p-6 w-full max-w-4xl bg-white rounded shadow-xl">
             <h1 class="text-3xl font-bold mb-6 text-red-600">Ödeme</h1>
             <div class="flex flex-col md:flex-row gap-8">
                 <div class="w-full md:w-1/2">
                     <form id="paymentForm">
                         <div class="mb-4"><label class="block mb-1 font-bold">Kart Üzerindeki İsim</label><input type="text" class="w-full border rounded px-3 py-2"></div>
                         <div class="mb-4"><label class="block mb-1 font-bold">Kart Numarası</label><input type="text" class="w-full border rounded px-3 py-2"></div>
                         <div class="flex gap-4 mb-4">
                             <div class="w-1/2"><label class="block mb-1 font-bold">SKT</label><input type="text" class="w-full border rounded px-3 py-2" placeholder="AA/YY"></div>
                             <div class="w-1/2"><label class="block mb-1 font-bold">CVC</label><input type="text" class="w-full border rounded px-3 py-2"></div>
                         </div>
                         <button type="submit" class="w-full bg-green-600 text-white font-bold py-2 px-4 rounded hover:bg-green-700">Ödemeyi Tamamla</button>
                     </form>
                 </div>
                 <div class="w-full md:w-1/2 bg-gray-50 p-6 rounded">
                     <h3 class="text-xl font-bold mb-4">Özet</h3>
                     <p>Kampanya: <span id="summaryCampaign" class="font-semibold"></span></p>
                     <p>Bağışçı: <span id="summaryName" class="font-semibold"></span></p>
                     <hr class="my-4">
                     <p class="text-2xl font-bold text-red-600" id="summaryAmount">0 TL</p>
                 </div>
             </div>
         </div>
    </main>

    <!-- SAYFA 5: KULLANICI PANELİ (HESABIM) -->
    <main id="page-account" class="hidden flex-grow py-12 md:py-16">
        <!-- ... (Mevcut kod) ... -->
        <div class="container mx-auto p-6">
             <h1 class="text-3xl font-bold text-gray-900 mb-8">Hesabım</h1>
             <div class="bg-white p-6 rounded shadow mb-8">
                 <h2 class="text-2xl font-bold mb-2">Hoş Geldiniz, <span id="accountName" class="text-red-600"></span></h2>
                 <p id="accountEmail" class="text-gray-600"></p>
             </div>
             <!-- Rozetler ve Geçmiş (Kısaltıldı, kodun içinde mevcut olmalı) -->
             <div class="bg-white p-6 rounded shadow">
                 <h3 class="text-xl font-bold mb-4">Geçmiş Bağışlar</h3>
                 <table class="w-full text-left">
                     <thead class="bg-gray-100"><tr><th class="p-3">Tarih</th><th class="p-3">Kampanya</th><th class="p-3">Tutar</th></tr></thead>
                     <tbody>
                         <tr class="border-b"><td class="p-3">10.10.2025</td><td class="p-3">Filistin Yardım</td><td class="p-3">500 TL</td></tr>
                     </tbody>
                 </table>
             </div>
        </div>
    </main>

    <!-- YENİ SAYFA: AYNİ BAĞIŞ SAYFASI -->
    <main id="page-kind-donation" class="hidden flex-grow py-12 md:py-16 bg-gray-50">
        <div class="container mx-auto px-6 max-w-4xl">
            <div class="bg-white rounded-lg shadow-xl overflow-hidden">
                <!-- Başlık Alanı -->
                <div class="bg-red-600 px-8 py-6">
                    <h1 class="text-3xl font-bold text-white">Ayni Bağış Formu</h1>
                    <p class="text-red-100 mt-2">İhtiyaç sahiplerine eşya ve malzeme desteğinde bulunun.</p>
                </div>
                
                <!-- Form İçeriği -->
                <div class="p-8">
                    <form id="kindDonationForm" class="space-y-8">
                        
                        <!-- 1. Bölüm: Kimlik ve İletişim -->
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800 border-b pb-2 mb-4 flex items-center">
                                <span class="bg-red-600 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm mr-3">1</span>
                                Kimlik ve İletişim Bilgileri
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2">T.C. Kimlik / Pasaport No *</label>
                                    <input type="text" required class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-red-500 focus:outline-none" placeholder="11 Haneli TC Numaranız">
                                </div>
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2">Adı Soyadı *</label>
                                    <input type="text" required class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-red-500 focus:outline-none" placeholder="Adınız Soyadınız">
                                </div>
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2">Cep Telefonu *</label>
                                    <input type="tel" required class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-red-500 focus:outline-none" placeholder="5XX XXX XX XX">
                                </div>
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2">E-Posta Adresi *</label>
                                    <input type="email" required class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-red-500 focus:outline-none" placeholder="ornek@eposta.com">
                                </div>
                            </div>
                        </div>

                        <!-- 2. Bölüm: Bağış Detayları -->
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800 border-b pb-2 mb-4 flex items-center">
                                <span class="bg-red-600 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm mr-3">2</span>
                                Bağış Detayları
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2">Bağış Kategorisi *</label>
                                    <select required class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-red-500 focus:outline-none">
                                        <option value="">Seçiniz...</option>
                                        <option value="gida">Gıda (Kuru Gıda, Konserve)</option>
                                        <option value="giyim">Giyim / Tekstil</option>
                                        <option value="barinma">Barınma (Çadır, Battaniye)</option>
                                        <option value="hijyen">Hijyen Malzemeleri</option>
                                        <option value="elektronik">Elektronik / Haberleşme</option>
                                        <option value="diger">Diğer</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2">Ürün Durumu *</label>
                                    <select required class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-red-500 focus:outline-none">
                                        <option value="sifir">Sıfır (Kullanılmamış)</option>
                                        <option value="ikinciel">İkinci El (Temiz/Kullanılabilir)</option>
                                    </select>
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-gray-700 font-medium mb-2">Ürün Açıklaması ve Miktarı *</label>
                                    <textarea required rows="3" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-red-500 focus:outline-none" placeholder="Örn: 50 adet kışlık mont, 100 adet battaniye..."></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- 3. Bölüm: Teslimat ve Adres -->
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800 border-b pb-2 mb-4 flex items-center">
                                <span class="bg-red-600 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm mr-3">3</span>
                                Teslimat Bilgileri
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2">İl *</label>
                                    <select required class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-red-500 focus:outline-none">
                                        <option value="">İl Seçiniz...</option>
                                        <option value="istanbul">İstanbul</option>
                                        <option value="ankara">Ankara</option>
                                        <option value="izmir">İzmir</option>
                                        <option value="diger">Diğer</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-gray-700 font-medium mb-2">İlçe *</label>
                                    <input type="text" required class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-red-500 focus:outline-none" placeholder="İlçe Giriniz">
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-gray-700 font-medium mb-2">Açık Adres (Alım Yapılacak Yer) *</label>
                                    <textarea required rows="2" class="w-full border border-gray-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-red-500 focus:outline-none" placeholder="Mahalle, Cadde, Sokak, No..."></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Onaylar -->
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
                            <label class="flex items-start mb-3 cursor-pointer">
                                <input type="checkbox" required class="mt-1 w-5 h-5 text-red-600 border-gray-300 rounded focus:ring-red-500">
                                <span class="ml-3 text-sm text-gray-600">
                                    6698 sayılı Kişisel Verilerin Korunması Kanunu kapsamında <a href="#" class="text-red-600 hover:underline">Aydınlatma Metni</a>'ni okudum ve anladım.
                                </span>
                            </label>
                            <label class="flex items-start cursor-pointer">
                                <input type="checkbox" required class="mt-1 w-5 h-5 text-red-600 border-gray-300 rounded focus:ring-red-500">
                                <span class="ml-3 text-sm text-gray-600">
                                    Bağışladığım ürünlerin AFAD standartlarına uygun olduğunu ve ihtiyaç sahiplerine ulaştırılmak üzere bedelsiz olarak hibe ettiğimi beyan ederim.
                                </span>
                            </label>
                        </div>

                        <!-- Buton -->
                        <div class="flex justify-end">
                            <button type="submit" class="bg-red-600 text-white font-bold py-4 px-8 rounded-lg hover:bg-red-700 transition duration-300 shadow-lg flex items-center">
                                <i class="fas fa-paper-plane mr-2"></i> Başvuruyu Gönder
                            </button>
                        </div>

                    </form>
                    
                    <!-- YENİ: Ayni Bağış Başarı Mesajı (Varsayılan Gizli) -->
                    <div id="kindDonationSuccess" class="hidden text-center py-10">
                        <div class="mb-4 text-green-600">
                            <i class="fas fa-check-circle fa-4x"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-gray-800 mb-4">Başvurunuz Alındı!</h2>
                        <p class="text-lg text-gray-600">
                            Talebiniz alınmıştır. <span class="font-bold text-gray-800">0312 258 2323</span> numaralı hattan detaylar için size ulaşacağız.
                        </p>
                        <button onclick="resetKindDonation()" class="mt-8 bg-blue-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-blue-700 transition duration-300">
                            Ana Sayfaya Dön
                        </button>
                    </div>

                </div>
            </div>
        </div>
    </main>

    <!-- Chatbot -->
    <div id="chatbot-container">
        <div id="chatbot-window">
            <div id="chatbot-header">
                <span>✨ AFAD Asistan</span>
                <button id="chatbot-close" style="background:none;border:none;color:white;font-size:20px;cursor:pointer;">&times;</button>
            </div>
            <div id="chatbot-messages">
                <div class="message bot">Merhaba! Size nasıl yardımcı olabilirim? Bağışlar, kampanyalar veya afet hazırlığı hakkında sorularınızı yanıtlayabilirim.</div>
            </div>
            <div id="chatbot-input-area">
                <input type="text" id="chatbot-input" placeholder="Bir soru sorun...">
                <button id="chatbot-send"><i class="fas fa-paper-plane"></i></button>
            </div>
            <div class="typing-indicator" id="typing-indicator">Asistan yazıyor...</div>
        </div>
        <button id="chatbot-toggle">
            <i class="fas fa-comment-dots"></i>
        </button>
    </div>


    <script>
        // --- SAYFA YÖNETİMİ ---
        const allPages = ['page-home', 'page-login', 'page-register', 'page-payment', 'page-account', 'page-kind-donation'];
        
        // Global Element Değişkenleri
        let headerLoggedOut, headerLoggedIn, infoModal, infoModalTitle, infoModalBody;
        let cartModal, cartItemsList, cartEmptyMsg, checkoutCartBtn, cartErrorMessage;
        let heroDonationForm, heroCustomAmountInput, heroErrorMessage, donationModal;
        let openModalBtn, closeModalBtn, modalOverlay, loginForm, loginErrorMessage;
        let registrationForm, regErrorMessage, paymentForm, heroCardContainer;
        let donationTicker, donationWall, kindDonationForm, kindDonationSuccess;

        function showPage(pageId, isLoggedIn = false) {
            allPages.forEach(id => {
                const page = document.getElementById(id);
                if (page) page.classList.add('hidden');
            });

            const targetPage = document.getElementById(pageId);
            if (targetPage) targetPage.classList.remove('hidden');

            if (headerLoggedOut && headerLoggedIn) {
                if (isLoggedIn) {
                    headerLoggedOut.classList.add('hidden');
                    headerLoggedIn.classList.remove('hidden');
                } else {
                    headerLoggedOut.classList.remove('hidden');
                    headerLoggedIn.classList.add('hidden');
                }
            }
            updateCartBadge();
            window.scrollTo(0, 0);
        }

        // --- SEPET SİSTEMİ ---
        let cart = [];
        const campaignDetails = {
            'yangin-sel': { title: 'Yangın ve Sel Afeti', description: 'Acil yardım.' },
            'zekat': { title: 'Zekat', description: 'Zekat bağışları.' },
            'filistin': { title: 'Filistin Yardım', description: 'Gazze insani yardım.' },
            'deprem': { title: 'Deprem Bağışları', description: 'Deprem bölgesi desteği.' },
            'pakistan': { title: 'Pakistan Yardım', description: 'Sel felaketi yardımı.' },
            'afganistan': { title: 'Afganistan Yardım', description: 'İnsani yardım.' },
            'idlib': { title: 'İdlib Yardım', description: 'Briket ev projesi.' },
            'sudan': { title: 'Sudan Yardım', description: 'Gıda ve barınma.' },
            'genel': { title: 'Genel Bağış', description: 'Genel faaliyetler.' } 
        };

        function addToCart(id) {
            const detail = campaignDetails[id];
            if(!detail) return;
            if(!cart.find(x=>x.id===id)) {
                cart.push({id: id, title: detail.title});
                updateCartBadge();
                alert(detail.title + " sepete eklendi.");
            }
        }

        function updateCartBadge() {
            const count = cart.length;
            const b1 = document.getElementById('cart-count-badge');
            const b2 = document.getElementById('cart-count-badge-logged-in');
            [b1,b2].forEach(b => {
                if(b) {
                    if(count > 0) { b.textContent = count; b.classList.remove('hidden'); }
                    else b.classList.add('hidden');
                }
            });
        }

        function showCartModal() {
            if(!cartModal) return;
            cartItemsList.innerHTML = "";
            if(cart.length === 0) {
                if(cartEmptyMsg) cartEmptyMsg.classList.remove('hidden');
                if(checkoutCartBtn) checkoutCartBtn.classList.add('hidden');
            } else {
                if(cartEmptyMsg) cartEmptyMsg.classList.add('hidden');
                if(checkoutCartBtn) checkoutCartBtn.classList.remove('hidden');
                cart.forEach(item => {
                    cartItemsList.innerHTML += `<div class="flex justify-between items-center mb-2"><span>${item.title}</span><input type="number" class="cart-amount border p-1 w-20" placeholder="TL" data-id="${item.id}"><button onclick="removeFromCart('${item.id}')" class="text-red-500 ml-2">Sil</button></div>`;
                });
            }
            if(cartErrorMessage) cartErrorMessage.classList.add('hidden');
            cartModal.classList.remove('hidden');
        }

        function closeCartModal() { if(cartModal) cartModal.classList.add('hidden'); }

        function removeFromCart(id) {
            cart = cart.filter(x => x.id !== id);
            updateCartBadge();
            showCartModal();
        }

        function checkoutCart() {
            const inputs = document.querySelectorAll('.cart-amount');
            let total = 0;
            let valid = true;
            let items = [];
            inputs.forEach(inp => {
                let val = parseFloat(inp.value);
                if(!val || val <= 0) valid = false;
                else { total += val; items.push(campaignDetails[inp.getAttribute('data-id')].title); }
            });

            if(!valid || cart.length === 0) {
                if(cartErrorMessage) {
                    cartErrorMessage.textContent = "Lütfen tüm tutarları giriniz.";
                    cartErrorMessage.classList.remove('hidden');
                }
                return;
            }
            
            document.getElementById('summaryCampaign').textContent = "Toplu Bağış (" + items.length + " Kalem)";
            document.getElementById('summaryAmount').textContent = total + " TL";
            document.getElementById('summaryName').textContent = "Ziyaretçi";
            
            closeCartModal();
            showPage('page-payment');
            cart = [];
            updateCartBadge();
        }

        function openInfoModal(id) {
             const d = campaignDetails[id];
             if(d && infoModal) {
                 infoModalTitle.textContent = d.title;
                 infoModalBody.textContent = d.description;
                 infoModal.classList.remove('hidden');
             }
        }
        function closeInfoModal() { if(infoModal) infoModal.classList.add('hidden'); }

        function openModalWithCampaign(title, id) {
            if(donationModal) {
                // Basitçe modalı aç, selecti güncelle
                const sel = document.getElementById('campaignSelect');
                if(sel && id) sel.value = id;
                donationModal.classList.remove('hidden');
            }
        }
        
        function closeHeroCard() {
            if(heroCardContainer) heroCardContainer.style.display = 'none';
        }

        // --- Ayni Bağış Reset Fonksiyonu ---
        function resetKindDonation() {
            if(kindDonationForm) {
                kindDonationForm.reset();
                kindDonationForm.classList.remove('hidden');
            }
            if(kindDonationSuccess) kindDonationSuccess.classList.add('hidden');
            showPage('page-home');
        }

        const recentDonations = [
            { name: 'Ali K.', amount: 100, campaign: 'Deprem' },
            { name: 'Ayşe Y.', amount: 500, campaign: 'Filistin' },
            { name: 'Anonim', amount: 200, campaign: 'Gıda' },
            { name: 'Mehmet B.', amount: 1000, campaign: 'Genel' }
        ];

        function initDonationFeatures() {
            // Rastgele veri üreteci (Evi doldurmak için)
            const names = ["Ayşe", "Mehmet", "Ali", "Zeynep", "Fatma", "Mustafa", "Emre", "Elif", "Burak", "Selin"];
            const amounts = [50, 100, 200, 500, 1000];
            let moreDonations = [];
            for(let i=0; i<18; i++) {
                 moreDonations.push({
                     name: names[Math.floor(Math.random()*names.length)],
                     amount: amounts[Math.floor(Math.random()*amounts.length)]
                 });
            }

            if(donationTicker) {
                let html = "";
                [...recentDonations, ...moreDonations].forEach(d => html += `<div class="ticker-item">❤️ ${d.name} - ${d.amount}₺</div>`);
                donationTicker.innerHTML = html + html; // Loop
            }
            if(donationWall) {
                 let html = "";
                 [...recentDonations, ...moreDonations].forEach(d => {
                     html += `
                        <div class="brick" title="${d.name} - ${d.amount} TL">
                            <span>${d.name}</span>
                            <span class="brick-amount">${d.amount}₺</span>
                        </div>
                     `;
                 });
                 donationWall.innerHTML = html;
            }
        }

        // --- Chatbot Logic ---
        async function callGeminiAPI(userMessage) {
             const apiKey = ""; // API key will be provided by the environment
             const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

             const prompt = `Sen AFAD'ın yardımsever ve bilgili asistanısın. Kullanıcıların bağışlar, kampanyalar, afet hazırlığı ve acil durumlar hakkındaki sorularını yanıtla. Kısa, net ve teşvik edici cevaplar ver. Türkçe konuş. Kullanıcı sorusu: ${userMessage}`;

             const payload = {
                 contents: [{ parts: [{ text: prompt }] }]
             };

             try {
                 const response = await fetch(url, {
                     method: 'POST',
                     headers: { 'Content-Type': 'application/json' },
                     body: JSON.stringify(payload)
                 });

                 if (!response.ok) throw new Error('API hatası');

                 const data = await response.json();
                 return data.candidates[0].content.parts[0].text;
             } catch (error) {
                 console.error('Gemini API Hatası:', error);
                 return "Üzgünüm, şu an bağlantı kuramıyorum. Lütfen daha sonra tekrar deneyin.";
             }
         }

        window.addEventListener('DOMContentLoaded', () => {
            // Elementleri Bağla
            headerLoggedOut = document.getElementById('header-logged-out');
            headerLoggedIn = document.getElementById('header-logged-in');
            infoModal = document.getElementById('infoModal');
            infoModalTitle = document.getElementById('infoModalTitle');
            infoModalBody = document.getElementById('infoModalBody');
            cartModal = document.getElementById('cartModal');
            cartItemsList = document.getElementById('cart-items-list');
            cartEmptyMsg = document.getElementById('cart-empty-msg');
            checkoutCartBtn = document.getElementById('checkoutCartBtn');
            cartErrorMessage = document.getElementById('cartErrorMessage');
            heroDonationForm = document.getElementById('heroDonationForm');
            heroCustomAmountInput = document.getElementById('heroCustomAmount');
            heroErrorMessage = document.getElementById('heroErrorMessage');
            donationModal = document.getElementById('donationModal');
            openModalBtn = document.getElementById('openModalBtn');
            closeModalBtn = document.getElementById('closeModalBtn');
            modalOverlay = document.getElementById('modalOverlay');
            loginForm = document.getElementById('loginForm');
            loginErrorMessage = document.getElementById('loginErrorMessage');
            registrationForm = document.getElementById('registrationForm');
            regErrorMessage = document.getElementById('regErrorMessage');
            paymentForm = document.getElementById('paymentForm');
            heroCardContainer = document.getElementById('hero-card-container');
            donationTicker = document.getElementById('donationTicker');
            donationWall = document.getElementById('donationWall');
            kindDonationForm = document.getElementById('kindDonationForm');
            kindDonationSuccess = document.getElementById('kindDonationSuccess');

            // Chatbot Elements
            const chatbotToggle = document.getElementById('chatbot-toggle');
            const chatbotWindow = document.getElementById('chatbot-window');
            const chatbotClose = document.getElementById('chatbot-close');
            const chatbotInput = document.getElementById('chatbot-input');
            const chatbotSend = document.getElementById('chatbot-send');
            const chatbotMessages = document.getElementById('chatbot-messages');
            const typingIndicator = document.getElementById('typing-indicator');

            // Event Listeners
            if(document.getElementById('infoModalOverlay')) document.getElementById('infoModalOverlay').addEventListener('click', closeInfoModal);
            if(document.getElementById('closeInfoModalBtn')) document.getElementById('closeInfoModalBtn').addEventListener('click', closeInfoModal);
            if(document.getElementById('closeInfoModalBtn2')) document.getElementById('closeInfoModalBtn2').addEventListener('click', closeInfoModal);
            if(document.getElementById('cartModalOverlay')) document.getElementById('cartModalOverlay').addEventListener('click', closeCartModal);
            if(document.getElementById('closeCartModalBtn')) document.getElementById('closeCartModalBtn').addEventListener('click', closeCartModal);
            if(openModalBtn) openModalBtn.onclick = () => openModalWithCampaign('', '');
            if(closeModalBtn) closeModalBtn.onclick = () => { if(donationModal) donationModal.classList.add('hidden'); };
            if(modalOverlay) modalOverlay.onclick = () => { if(donationModal) donationModal.classList.add('hidden'); };
            
            if(heroDonationForm) {
                heroDonationForm.onsubmit = (e) => {
                    e.preventDefault();
                    if(donationModal) donationModal.classList.add('hidden');
                    showPage('page-payment');
                };
            }
            if(loginForm) {
                loginForm.onsubmit = (e) => {
                    e.preventDefault();
                    alert("Giriş Başarılı");
                    showPage('page-account', true);
                };
            }
            if(registrationForm) {
                registrationForm.onsubmit = (e) => {
                    e.preventDefault();
                    alert("Kayıt Başarılı");
                    showPage('page-login');
                };
            }
            if(paymentForm) {
                paymentForm.onsubmit = (e) => {
                    e.preventDefault();
                    alert("Ödeme Alındı!");
                    showPage('page-home');
                };
            }

            // YENİ: Ayni Bağış Formu İşleyicisi Güncellendi
            if(kindDonationForm) {
                kindDonationForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    // Formu gizle
                    kindDonationForm.classList.add('hidden');
                    // Başarı mesajını göster
                    if(kindDonationSuccess) kindDonationSuccess.classList.remove('hidden');
                    // Sayfayı yukarı kaydır
                    window.scrollTo(0, 0);
                });
            }

            // Chatbot Listeners
            if(chatbotToggle && chatbotWindow && chatbotClose) {
                chatbotToggle.onclick = () => {
                    chatbotWindow.style.display = chatbotWindow.style.display === 'flex' ? 'none' : 'flex';
                };
                chatbotClose.onclick = () => {
                    chatbotWindow.style.display = 'none';
                };
            }

            if(chatbotSend && chatbotInput && chatbotMessages) {
                const sendMessage = async () => {
                    const message = chatbotInput.value.trim();
                    if(!message) return;

                    // User Message
                    const userMsgDiv = document.createElement('div');
                    userMsgDiv.className = 'message user';
                    userMsgDiv.textContent = message;
                    chatbotMessages.appendChild(userMsgDiv);
                    chatbotInput.value = '';
                    chatbotMessages.scrollTop = chatbotMessages.scrollHeight;

                    // Typing Indicator
                    if(typingIndicator) typingIndicator.style.display = 'block';

                    // Call Gemini API
                    const botResponse = await callGeminiAPI(message);

                    // Hide Typing Indicator
                    if(typingIndicator) typingIndicator.style.display = 'none';

                    // Bot Message
                    const botMsgDiv = document.createElement('div');
                    botMsgDiv.className = 'message bot';
                    botMsgDiv.textContent = botResponse;
                    chatbotMessages.appendChild(botMsgDiv);
                    chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
                };

                chatbotSend.onclick = sendMessage;
                chatbotInput.onkeypress = (e) => {
                    if(e.key === 'Enter') sendMessage();
                };
            }

            initDonationFeatures();
            showPage('page-home');
        });
    </script>
</body>
</html>
